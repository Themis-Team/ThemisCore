<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- For Mobile Devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Loading Lato Font -->
  <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
  <!-- Loading Font Awesome -->
  <link rel="stylesheet" href="../fonts/font-awesome-4.7.0/css/font-awesome.min.css">
  <!-- Doxygen version -->
  <meta name="generator" content="Doxygen 1.8.13"/>
  <!--PROJECT_NAME-->
  <title>Themis Documentation</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
  <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet"> -->
  <link href="../bootstrap/css/sticky-footer-navbar.css" rel="stylesheet">
  <link href="../bootstrap/css/customdoxygen.css" rel="stylesheet">
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="../bootstrap/js/bootstrap.min.js"></script>
  <!-- <script type="text/javascript" src="../bootstrap/js/doxy-boot.js"></script> -->
</head>
<body screen_capture_injected="true">
  <!-- Wrap all page content here -->
  <div id="wrap">
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse" role="navigation">
    <!-- Fixed top navbar
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation"> 
    -->
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand hidden-sm" href="index.html">
        <p style="color:white; font-size:160%; font-family:serif, fantasy; font-variant: small-caps; color:DEEPSKYBLUE">Themis</p></a>
        <a class="navbar-brand visible-sm" style='margin-left: -30px !important;width: 60px !important;' href="index.html"><p>THEMIS</p></a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav adjust-right">
          <li><a href="index.html"> Home</a></li>
          <li><a href="About.html">About</a></li>
          <li><a href="GetStarted.html">Get Started</a></li>
          <li><a href="Contribute.html">Contribute</a></li>
          <li><a href="index.html">Documentation</a></li>
          <li><a href="https://github.com/PerimeterInstitute/Themis">Download</a></li>
          <li><a href="http://www.eventhorizontelescope.org/">EHT</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
    </nav>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
      <div class="container">
        <div class="row">
          <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
            <div style="margin-bottom: 15px;">
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How to prepare, compile, and execute Themis.</p>
<h2>External System Requirements </h2>
<p>To facilitate portability, the number of external system requirements for Themis has been intentionally kept to the bare minimum. Nevertheless, it does require some elements to be installed to access its full functionality. These are:</p>
<ul>
<li><b>Make</b>: Themis uses the <em>make</em> utility to compile the code. In addition, there are some compilation scripts that are written assuming that <em>bash</em> exists. Both of these are standard on all POSIX systems. Make versions that have been tested include <em>GNU Make 3.81</em>, <em>GNU Make 4.1</em>, <em>GNU Make 4.2.1</em>.</li>
<li><b>C++</b>: The native Themis code is written in C++, and thus requires an installation of the C++ compiler. Some features of Themis require C++11 directives, though the experimental support present in <em>gcc</em> is sufficient. Again, these are standard on all POSIX systems. Compilers that have been tested include <em>clang-800.0.42.1</em>, <em>clang-802.0.42</em>, <em>gcc 4.4.7</em>, <em>gcc 4.8.4</em>, <em>gcc 4.8.5</em>, <em>gcc 4.9.4</em>, <em>gcc 6.1.1</em>, <em>gcc 6.3.0</em>, <em>icpc 12.1.3</em>.</li>
<li><b>MPI</b>: Themis is parallelized via the <em>Message Passing Interface</em>. This is installed in most high-performance computing environments, and may be installed locally on most systems via the local package manager (yum, aptget, homebrew, etc.) or from source for, e.g., <a href="https://www.open-mpi.org/">OpenMPI</a> or <a href="https://www.mpich.org/">MPICH</a>. Themis has been tested with <em>Open MPI 1.6.2</em>, <em>Open MPI 1.6.5</em>, <em>Open MPI 1.10.3</em>, <em>Open MPI 1.10.4</em>, <em>Open MPI 2.0.2</em>, <em>Open MPI 2.1.1</em>.</li>
<li><b>FFTW v3.0 or later</b>: To compute Fourier transforms Themis uses the <a href="http://www.fftw.org/">FFTW</a> library. This is installed in most high-performance computing environments, and may be installed locally on most systems via the local package manager (yum, aptget, homebrew, etc.) or from source from the <a href="http://www.fftw.org/">FFTW website</a> directly. Themis has been tested with <em>FFTW 3.2.1</em>, <em>FFTW 3.3.3</em>, <em>FFTW 3.3.4</em>, <em>FFTW 3.3.5</em>.</li>
<li><b>Doxygen 1.8.5 or later</b>: The Themis documentation is automatically generated using the <a href="http://www.doxygen.org/">Doxygen</a> package. This is only required if you wish to <em>remake</em> the documentation; Themis documentation is provided in html format. Themis documation has been tested with <em>Doxygen 1.8.5</em>, <em>Doxygen 1.8.6</em>, <em>Doxygen 1.8.9.1</em>.</li>
<li><b>Graphviz</b>: Automatic call/caller graph, inheritance diagram, and collaboration diagram support is provided via the graphviz infrastructure. This is only required if you wish to <em>remake</em> the documentation; Themis documentation is provided in html format. Themis documation has been tested with <em>Graphviz 2.26.0</em>, <em>Graphviz 2.30.1</em>, <em>Graphviz 2.36.0</em>, <em>Graphviz 2.38.0</em>.</li>
</ul>
<p>In addition, Themis is distributed with the VRT2 library, which may be made via the Themis make process. To make use of ASTRORAY or <a href="https://github.com/jadexter/grtrans">grtrans</a>, the relative code libraries must be separately obtained and installed.</p>
<h2>Themis Makefile Configuration </h2>
<p>Because the different external components vary in type and location on individual systems it is necessary to configure the compilation process. In Themis this is accomplished via the presence of a <em>Makefile.config</em> file, to be located in Themis/src; examples can be found in the <em>config</em> directory (e.g., Makefile.config.Procyon). This file defines:</p>
<ul>
<li>The MPI C++ compiler to use by defining the variable CC.</li>
<li>The appropriate compiler flags to use by defining the variable CC_FLAGS. These should enable C++11 directives (e.g., the <em>-std=c+0x</em> flag for gcc, or <em>-std=c++11</em> for icpc, etc.). They should also include the optimal set of compiler optimization (e.g., <em>-O3 -mtune=native -march=native -ffast-math</em> for gcc).</li>
<li>The absolute path of the directory containing fftw3.h by defining the variable FFTW_INCLUDE_DIR.</li>
<li>The absolute path of the directory containing libfftw3.a by defining the variable FFTW_LIB_DIR.</li>
</ul>
<p>In the absence of <em>Makefile.config</em>, make will make some, likely poor, default choices that will typically fail on most systems (primarily the FFTW include and library directories, which are then assumed to be located in Themis/FFTW/include and Themis/FFTW/lib). Make will report if it can find a Makefile.config, and the values of CC, CC_FLAGS, FFTW_INCLUDE_DIR, FFTW_LIB_DIR that will be used.</p>
<p><b>Note that an individual user's Makefile.config should <em>never</em> be uploaded as such, but users are strongly encouraged to add their own configuration file in the <em>config</em> directory, appended with an appropriate hostname, to share the appropriate configuration choices on different systems.</b></p>
<h2>Making Themis </h2>
<p>After creating an appropriate Makefile.config, Themis can be compiled. The simplest way to get started with the examples and tests is to run</p>
<pre class="fragment">$ make all
</pre><p>This will generate the VRT2 library, compile the individual components of Themis, and compile the drivers in the Themis/src/tests, Themis/src/examples, and Themis/src/validation directories, about which information may be found on the <a class="el" href="a02751.html">Examples and Tests page</a>. The resulting executables will be found in Themis/bin/tests, Themis/bin/examples, and Themis/bin/validation, respectively.</p>
<p>Specific make options are:</p>
<p><em>make</em> &ndash; Makes the Themis components by default.</p>
<p><em>make clean</em> &ndash; Cleans up the Themis component object files.</p>
<p><em>make distclean</em> &ndash; Cleans up the Themis component object files and the VRT2 libraries.</p>
<p><em>make all</em> &ndash; Makes the VRT2 library, Themis components, and drivers in Themis/src/tests, Themis/src/examples, and Themis/src/validation directories, and the Themis documentation. Executables are in Themis/bin/tests, Themis/bin/examples, and Themis/bin/validation directories, respectively.</p>
<p><em>make subdirs</em> &ndash; Makes the Themis components.</p>
<p><em>make vrt2lib</em> &ndash; Makes the VRT2 libraries.</p>
<p><em>make tests</em> &ndash; Makes the drivers in Themis/src/tests and Themis/src/tests/*. Executables are in Themis/bin/tests and its subdirectories.</p>
<p><em>make examples</em> &ndash; Makes the drivers in Themis/src/examples and Themis/src/examples/*. Executables are in Themis/bin/examples and its subdirectories.</p>
<p><em>make validation</em> &ndash; Makes the drivers in Themis/src/validation and Themis/src/validation/*. Executables are in Themis/bin/validation and its subdirectories.</p>
<p><em>make development_tests</em> &ndash; Makes the drivers in Themis/src/development_tests and Themis/development_tests/tests/*. Executables are in Themis/bin/development_tests and its subdirectories.</p>
<p><em>make analyses</em> &ndash; Makes the drivers in Themis/src/analyses and Themis/src/analyses/*. Executables are in Themis/bin/analyses and its subdirectories.</p>
<p><em>make sandbox</em> &ndash; Makes the drivers in Themis/src/sandbox and Themis/src/sandbox/*. Executables are in Themis/bin/sandbox and its subdirectories.</p>
<p><em>make docs</em> &ndash; Makes the Themis documentation with the Doxygen package.</p>
<p>You may also make any individual executable within Themis/src/tests, Themis/src/examples, Themis/src/validation, Themis/src/development_tests, Themis/src/analyses, and Themis/src/sandbox by specifying the file name (without .cpp), e.g., to generate the executable associated with <a class="el" href="a01421.html" title="Check FFTs by comparing analytical to numerical visibilities in Gaussian model. ">Themis/src/tests/gaussian_blob.cpp</a>:</p>
<pre class="fragment">make tests/gaussian_blob
</pre><p>The corresponding executable will be located in the appropriate subdirectory of Themis/bin, Themis/bin/tests in this case.</p>
<h2>Running Themis </h2>
<p>To run Themis, descend into the appropriate directory and run with the appropriate mpirun command. For example, with OpenMPI:</p>
<pre class="fragment">mpirun -np &lt;# of procs&gt; &lt;executable&gt;
</pre><p>Note that currently all internal input file names (e.g., a model input parameter like that used for the model_image_sed_fitted_riaf object) must be either contain absolute paths (and thus not be portable to other machines) or the relative position of the executable must be fixed. Thus, some examples and tests may fail if they are run in directories other than the Themis/bin/examples or Themis/bin/tests directories.</p>
<h2>Getting help </h2>
<p>The Themis Development Team is here to help! If you need assistance, please <a class="el" href="a02747.html">contact us</a>. </p>
</div></div><!-- contents -->
<!--END GENERATE_TREEVIEW-->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footer">
  <div class="container">
  <div class='row text-muted'>
    <div class='footer-row col-md-8'>Copyright &copy; 2020 <a href='Developers.html'>Themis Development Team.</a> All Rights Reserved. </div>
    <div class='footer-row col-md-1'><a href='Developers.html'>Contact</a></div>
  </div>
  </div>
  </div>
  <script>
    $(function(){
        $('.cse-search').change(function(){
            $('.adjust-right li.active').focus();
		});
		$('.cse-search').on('click', function(){
			if($(this).hasClass('active')){
				$(this).removeClass('active');
				$('.google-cse').slideUp();
			} else {
				$(this).addClass('active');
				$('.google-cse').hide().removeClass('hide').slideDown();
			}
		});
	});
  </script>
</body>
</html>
